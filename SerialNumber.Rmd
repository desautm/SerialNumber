---
title: "Le problème du char d'assaut allemand"
subtitle: "ou comment j'ai appris à ne plus m'en faire et à aimer ~~la bombe~~ les numéros de série"
author: "Marc-André Désautels"
date: "Octobre 2018"
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
     
---
class: center, middle

## Pour mon sous-titre...

--

### merci à...

--

### Dr. Strangelove or: How I Learned to Stop Worrying and Love the Bomb

--

### *Docteur Folamour ou : comment j'ai appris à ne plus m'en faire et à aimer la bombe*

---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
library(mosaic)
library(ggplot2)
library(reshape2)
theme_set(theme_minimal())
set.seed(39894095)

# Définition des fonctions pour le calcul des mesures sur les numéros de série.

N1 <- function(ech){
  return(round(2*median(ech)-1))
}

N2 <- function(ech){
  return(round(2*mean(ech)-1))
}

N3 <- function(ech){
  return(round(max(ech)+min(ech)-1))
}

N4 <- function(ech){
  return(round((length(ech)+1)/length(ech)*max(ech)-1))
}

N5 <- function(ech){
  return(round((max(ech)-min(ech))*(length(ech)+1)/(length(ech)-1)))
}

```

background-image: url(https://upload.wikimedia.org/wikipedia/commons/f/f6/Dr._Strangelove_poster.png)

???

Image credit: [Wikimedia Commons](https://commons.wikimedia.org/wiki/File%3ADr._Strangelove_poster.png)

---

# AVERTISSEMENT!

## Cette présentation peut contenir plusieurs [*gifs*](https://fr.wikipedia.org/wiki/Graphics_Interchange_Format) provenant de **Dr Strangelove**!

--

.center[![War Room](https://media.tenor.com/images/7419d5d195010e8df772789f93fa5c88/tenor.gif)]

--

.center[Après cet interlude ludique, passons aux choses sérieuses!]

---
class: inverse, center, middle

# Débutons...

---
layout: true

### L'historique

---

#### Le déroulement de la guerre

--

- La guerre éclate en Europe (1939–40)

--

  - $1^{er}$ septembre 1939, l'Allemagne envahit la Pologne sous le faux prétexte que les Polonais ont orchestrés des opérations de sabotage contre des installations allemandes près de la frontière.
  
--
  
- La guerre en Europe de l'Ouest (1940–41)

--

- Le front méditérannéen (1940–41)

--

- L'Axe attaque l'URSS (1941)

--

- La guerre éclate dans le Pacifique (1941)

--

  - Le 7 décembre 1941, les forces aéronavales japonaises mènent une attaque surprise contre la base navale de Pearl Harbor. Cette attaque entraîne l'entrée des États-Unis dans la Seconde Guerre mondiale.

---

#### Le déroulement de la guerre (suite)

- Les avancées de l'Axe ralentissent (1942–43)

--

- Les Alliés gagnent du terrain (1943–44)

--

- Les Alliés s'approchent de la victoire (1944)

--

 - Le 6 juin 1944 a lieu le débarquement de Normandie (nom de code **Opération Neptune**). C'est la plus grande opération maritime de l'histoire. Cette opération a permis la libération du Nord-Ouest de l'Europe qui se trouvait sous contrôle nazi et a contribué à la victoire Alliée sur le front Ouest.

--

- L'Axe s'écroule, victoire des Alliés (1944–45)

--

 - La Seconde Guerre mondiale prend fin sur le théâtre d'opérations européen le 8 mai 1945 par la capitulation sans condition du Troisième Reich, puis s’achève définitivement sur le théâtre d'opérations Asie-Pacifique le 2 septembre 1945 par la capitulation également sans condition de l'Empire du Japon, dernière nation de l’Axe à connaître une défaite totale.

---
layout: false
layout: true

### Début de l'année 1943

---

La structure de commandement alliée croyait que les chars d'assaut *Panzer V* (ou *Panther*) aperçus en Italie, avec leur canons haute vitesse et long barillets de 75 mm, qui étaient des chars particulièrement lourds, ne seraient croisés au nord de la France qu'en petit nombre.

<img src="http://www.tanks-encyclopedia.com/ww2/nazi_germany/photos/Panther_Ausfehrung-A.jpg" width="800"> 

---

L'armée américaine était confiante que les chars *Sherman* allait continuer à bien performer face aux *Panzer V*, comme ils l'avaient fait contre les chars *Panzer III* et *Panzer IV* en Afrique du Nord et en Sicile.

<img src="https://i.pinimg.com/originals/c7/3f/0f/c73f0f97cbe5c0861122f63bc7a59566.png" width="800">

---

Peu de temps avant le débarquement de Normandie, des rumeurs ont émergées qu'un grand nombre de chars *Panzer V* étaient utilisés au front.

.center[
<img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Into_the_Jaws_of_Death_23-0455M_edit.jpg" width="550">]

???

Image credit: [Wikimedia Commons](https://commons.wikimedia.org/wiki/File%3AInto_the_Jaws_of_Death_23-0455M_edit.jpg)

English: WWII: Europe: France; “Into the Jaws of Death — U.S. Troops wading through water and Nazi gunfire”, circa 1944-06-06.
Français : Seconde Guerre mondiale, Europe, France. « Entre les dents de la mort — Les troupes américaines pataugent dans l’eau sous les balles nazies. ». Photo prise vers 08:30 le matin du 6 juin 1944.

---

Comment savoir si un plus grand nombre de chars *Panzer V* étaient utilisés au front?

--

Les Alliés tentèrent d'estimer le nombre de chars produits.

--

**COMMENT???**

--

En utilisant les numéros de séries sur les chars capturés et détruits!

--

.center[![Stupéfaction](https://media.giphy.com/media/Sw5EsuT5VI3aU/giphy.gif)]


---
layout: false

# Le problème du char d'assaut allemand

Il tire son nom de son application par les Alliés de la Seconde Guerre mondiale afin d'estimer la production de chars d'assaut allemands.

.center[![Tank en feu](http://www.statisticalconsultants.co.nz/weeklyfeatures/WF15/Crusader-tank-and-german-tank.jpg)]

--

La technique que nous verrons a par contre été utilisée pour estimer bien d'autres produits de guerre allemands.

---
layout: false
layout: true

## L'intelligence économique durant la seconde guerre mondiale

---

--

- L’intelligence économique est l'ensemble des activités coordonnées de collecte, de traitement et de diffusion de l'information utile aux acteurs économiques, en vue de son exploitation.

--

- Derrière chaque attaque en Europe se cachait des recherches exhaustives portant sur certains produits guerriers allemands indispensables;

--

- Durant les premières phases de la guerre, l'intelligence économique alliée se montra inadéquate pour les nombreux besoins qu'on demandait d'elle.

--

- Les estimés étaient basés sur des données d'avant la guerre ou alors extrapolées à partir de donnée américaines ou britanniques.

--

- Les données obtenues par les services secrets donnaient d'énormes masses de données contradictoires.

--

- **Il fallait trouver une autre façon d'obtenir de l'information!**

---
layout: false
layout: true

# Les numéros de séries

---

### L'information présente

Chaque pièce d'équipement allemande, que ce soit un objet complet ou les parties le composant était marqués de symboles inscrits sur l'équipement ou sur des plaques attachées.

Ces marquages variaient au niveau de leur complétude et étaient composés, en partie ou en totalité, de l'information suivante:

--

1. Le nom et la localisation du constructeur.

--

2. La date de manufacture.

--

3. Le numéro de série de production.

--

4. Autres informations, par exemple marques de commerce, numéros de moules, etc.

---

### Le but de ces informations

Les marquages présents servaient deux utilités:

--

1. Premièrement, ils fournissaient l'information nécessaire pour maintenir un certain standard de production. Un malfonctionnement de l'équipement dû à un défaut de fabrication pouvait être retracé à sa source et corrigé.

--

2. Deuxièmement, certains de ces marquages étaient essentiels pour le contrôle des pièces de rechange. 

---

### Les objets étudiés

La **Economic Warfare Division** et le **British Ministry of Economic Warfare** ont étudiés plusieurs types d'équipements allemands:

--

- Les pneus (de camions et d'avions)

--

- **Les chars d'assaut**

--

- Camions et automobiles

--

- Armes à feu

--

- Munitions

--

- Composantes spéciales

--

- Bombes

--

- Fusées

---
layout: false
class: inverse, middle, center

# Les mathématiques... 

--

# enfin!

.center[![Heil Hitler](https://media.giphy.com/media/oR3IyFMKn6zuM/giphy.gif)]

---
layout: true 

# Préalables

---

Supposons que nous avons une population d'objets numérotés de la façon suivante : $s+1$, $s+2$, $s+3$, ... , $s+N$.

--

Trois situations peuvent se produire...

--

1. $s$ est **connu** et égal à $0$ et $N$ est **inconnu**.

--

2. $s$ est **connu** mais différent de $0$ et $N$ est **inconnu**.

--

3. $s$ est **inconnu** et $N$ est **inconnu**.

--

Nous allons nous intéresser en premier lieu à la première situation.

---

Supposons que nous avons une population d'objets numérotés de la façon suivante : $1$, $2$, $3$, ... , $N$, où $N$ est **inconnu**.

--

Nous pigeons, **__sans remise__**, un échantillon $X_1$, $X_2$, $X_3$, ..., $X_n$, de taille $n$ à partir de la population. 

--

**__Nous aimerions estimer la valeur de $N$ à partir de l'échantillon prélevé.__**

--

Pour calculer les diverses mesures statistiques dont nous aurons besoin, nous allons classer les unités statistiques de notre échantillon en ordre croissant. Nous avons:

$$X_{(1)} <  X_{(2)} < X_{(3)} < \ldots < X_{(n-1)} < X_{(n)}$$

qui sont les valeurs ordonnées de l'échantillon $X_1$, $X_2$, $X_3$, ..., $X_n$.

---

### Les mesures statistiques

Il est possible de montrer,
--
 **__avec un peu d'huile de coude__**:
 
- $E(X_{(A)})=\dfrac{A(N+1)}{n+1}$

- $Var(X_{(A)})=\dfrac{A(n+1-A)(N+1)(N-n)}{(n+1)^2(n+2)}$

- $Cov(X_{(A)},X_{(B)})=\dfrac{A(n+1-B)(N+1)(N-n)}{(n+1)^2(n+2)}$

--

Nous allons maintenant trouver quatre estimés de $N$ en utilisant simplement notre "gros bon sens".

---
layout: false
class: middle, center, inverse

# Cas où le numéro de série initial est connu et est égal à 1

---
layout:true

# Les estimés

---

### La médiane et la moyenne

Premièrement, supposons que nous connaissons la valeur milieu $m$ de la liste $1$, $2$, ..., $N$. 

$$\underbrace{1,2,3,\ldots,m-1}_{m-1 \text{ éléments}},m,\underbrace{m+1,\ldots,N-2,N-1,N}_{m-1 \text{ éléments}}$$

--

Il y aura donc $m-1$ valeurs en-dessous de $m$ et $m-1$ valeurs au-dessus de $m$. 

--

Donc, si nous incluons la valeur milieu $m$, nous avons:

$$N=(m-1)+1+(m-1)=2m-1$$ 

--

Puisque nous ne connaissons pas $m$, il est raisonnable de le remplacer par une estimation, par exemple la médiane $\tilde{X}$ ou la moyenne $\bar{X}$.

---

### La médiane et la moyenne

Nous obtenons donc nos deux premiers estimés.

| $i$    | $\hat N_i$ | $E(\hat N_i)$ | $Var(\hat N_i)$ |
|:------:|:----------:|:-------------:|:---------------:|
| 1 | $2\tilde{X}-1$ | $N$ | $\dfrac{(N-n)(N+1)}{n+2}$ pour $n$ impair |
|   |                |     | $\dfrac{n}{n+1}\cdot\dfrac{(N-n)(N+1)}{n+2}$ pour $n$ pair |
| 2 | $2\bar{X}-1$   | $N$ | $\dfrac{n+2}{3n}\cdot\dfrac{(N-n)(N+1)}{n+2}$ |

---

### La médiane et la moyenne

Malheureusement, nos deux estimés $\hat N_1$ et $\hat N_2$ peuvent être plus petits que le plus grand entier de notre échantillon, c'est-à-dire $X_{(n)}$!

--

Soit un échantillon de taille $n=3$ tel que $X_1=2$, $X_2=10$ et $X_3=3$.

--

Nous avons:

$$\hat{N}_1=2\tilde{X}-1=5 \qquad \text{et} \qquad \hat{N}_2=2\bar{X}-1=9$$

--

Malheureusement, nous savons que $N$ est supérieur ou égal à 10!

???

La médiane est 3 et la moyenne est 5.

---
layout: true

# Les estimés

### D'autres estimés

---

Nous voulons maintenant trouver d'autres estimés qui sont toujours supérieurs ou égaux au plus grand entier de notre échantillon.

--

Par symétrie, nous pouvons supposer que le nombre de numéros de série non-observés au-dessus de $X_{(n)}$ soit le même que le nombre de numéros de série non-observés en-dessous de $X_{(1)}$. Nous avons donc:

--

$$N-X_{(n)}=X_{(1)}-1$$

--

ce qui implique:

$$\hat{N_3}=X_{(n)}+X_{(1)}-1$$

---

Pour le troisième estimé, nous avons:

| $i$    | $\hat N_i$ | $E(\hat N_i)$ | $Var(\hat N_i)$ |
|:------:|:----------:|:-------------:|:---------------:|
| 3 | $X_{(n)}+X_{(1)}-1$ | $N$ | $\dfrac{2}{n+1}\cdot\dfrac{(N-n)(N+1)}{n+2}$  |

---

Si nous continuons le raisonnement précédent, il apparaît raisonnable de poser le nombre de numéros de série non-observés au-dessus de $X_{(n)}$ comme étant la moyenne du:

--

- nombre de numéros de série non-observés en-dessous de $X_{(1)}$;

--

- nombre de numéros de série non-observés entre $X_{(1)}$ et $X_{(2)}$;

--

- nombre de numéros de série non-observés entre $X_{(2)}$ et $X_{(3)}$;

--

- ...

--

- nombre de numéros de série non-observés entre $X_{(n-1)}$ et $X_{(n)}$.

---

Nous avons donc que $N-X_{(n)}$ est égal à:

--

$$\frac{1}{n}\left[ (X_{(1)}-1)+(X_{(2)}-X_{(1)}-1)+(X_{(3)}-X_{(2)}-1)+\ldots+(X_{(n)}-X_{(n-1)}-1) \right]$$

--

ce qui se simplifie à:

$$N-X_{(n)}=\frac{X_{(n)}}{n}-1$$

--

Nous avons donc:

$$\hat{N}_4=\left( \frac{n+1}{n}\right) X_{(n)}-1$$

---

Pour le quatrième estimé, nous avons:

| $i$    | $\hat N_i$ | $E(\hat N_i)$ | $Var(\hat N_i)$ |
|:------:|:----------:|:-------------:|:---------------:|
| 4 | $\left( \frac{n+1}{n}\right) X_{(n)}-1$ | $N$ | $\dfrac{1}{n}\cdot\dfrac{(N-n)(N+1)}{n+2}$  |

---
layout: false
class: inverse, middle, center

# Quelques simulations

---
layout: true

# Simulations dans R

---

Nous allons nous créer une population de taille $N=500$.

```{r}
pop <- c(1:500)
```

Nous pouvons choisir un échantillon aléatoire, **sans remise**, de taille $n=5$. de la façon suivante:

```{r}
ech <- sample(pop, 5, replace = FALSE)
ech
```

Le minimum de notre échantillon est `r min(ech)` et le maximum est `r max(ech)`.

---

Nous pouvons calculer les quatres estimés associés à l'échantillon précédent:

```{r}
N1(ech)
N2(ech)
N3(ech)
N4(ech)
```

---
layout: false

Nous simulons 5 000 échantillons de taille 5 à partir d'une population de taille 500. Nous calculons pour chacun de ces échantillons nos quatre estimés.

--

```{r, echo = FALSE, fig.align='center'}
N <- 500
n <- 5
iter <- 5000
pop <- c(1:N)

N1.guess <- data.frame(NULL)
N2.guess <- data.frame(NULL)
N3.guess <- data.frame(NULL)
N4.guess <- data.frame(NULL)
N.guess <- data.frame(NULL)

for (i in 1 : iter){
  ech <- sample(pop, n, replace = FALSE)
  N1.guess[i,1] = N1(ech)
  N1.guess[i,2] = "N1"
  N2.guess[i,1] = N2(ech)
  N2.guess[i,2] = "N2"
  N3.guess[i,1] = N3(ech)
  N3.guess[i,2] = "N3"
  N4.guess[i,1] = N4(ech)
  N4.guess[i,2] = "N4"
}

N.guess = rbind(N1.guess,N2.guess,N3.guess,N4.guess)

ggplot(data = N.guess, mapping = aes(x = V1)) +
  geom_histogram(binwidth = 50, color="darkblue", fill="lightblue") +
  labs(
    x = "Estimations",
    y = "Fréquence"
  ) +
  geom_vline(xintercept=N,linetype=2,color="black") +
  facet_grid(V2 ~ .)
```

---

Nous simulons 5 000 échantillons de taille 20 à partir d'une population de taille 500. Nous calculons pour chacun de ces échantillons nos quatre estimés.

--

```{r, echo = FALSE, fig.align='center'}
N <- 500
n <- 20
iter <- 5000
pop <- c(1:N)

N1.guess <- data.frame(NULL)
N2.guess <- data.frame(NULL)
N3.guess <- data.frame(NULL)
N4.guess <- data.frame(NULL)
N.guess <- data.frame(NULL)

for (i in 1 : iter){
  ech <- sample(pop, n, replace = FALSE)
  N1.guess[i,1] = N1(ech)
  N1.guess[i,2] = "N1"
  N2.guess[i,1] = N2(ech)
  N2.guess[i,2] = "N2"
  N3.guess[i,1] = N3(ech)
  N3.guess[i,2] = "N3"
  N4.guess[i,1] = N4(ech)
  N4.guess[i,2] = "N4"
}

N.guess = rbind(N1.guess,N2.guess,N3.guess,N4.guess)

ggplot(data = N.guess, mapping = aes(x = V1)) +
  geom_histogram(binwidth = 50, color="darkblue", fill="lightblue") +
  labs(
    x = "Estimations",
    y = "Fréquence"
  ) +
  geom_vline(xintercept=N,linetype=2,color="black") +
  facet_grid(V2 ~ .)
```

---

Nous simulons des populations de tailles 10 à 1 000. Pour chacune d'entre elles, nous choisissons 50 échantillons de taille 5 et nous calculons les quatre estimations.

--

```{r, echo = FALSE, dev='svg', fig.align='center', fig.height = 5}
N1.guess <- data.frame(NULL)
N2.guess <- data.frame(NULL)
N3.guess <- data.frame(NULL)
N4.guess <- data.frame(NULL)
N.guess <- c()

for (i in (10:100) ){
  N = 10*i
  N.guess[i-9] = N
  for (j in 1 : 50){
    ech <- sample(1:N,5)
    N1.guess[i-9,j] = N1(ech)
    N2.guess[i-9,j] = N2(ech)
    N3.guess[i-9,j] = N3(ech)
    N4.guess[i-9,j] = N4(ech)
  }
}

N1.guess$N = N.guess
N2.guess$N = N.guess
N3.guess$N = N.guess
N4.guess$N = N.guess

N1.melt=melt(N1.guess, id="N")
N1.melt$variable="N1"
N2.melt=melt(N2.guess, id="N")
N2.melt$variable="N2"
N3.melt=melt(N3.guess, id="N")
N3.melt$variable="N3"
N4.melt=melt(N4.guess, id="N")
N4.melt$variable="N4"

N.guess = rbind(N1.melt,N2.melt,N3.melt,N4.melt)

ggplot(data = N.guess, mapping = aes(x = N, y = value)) +
  geom_jitter(aes(color=variable), alpha=0.5) +
  labs(
    x = "Nombre de chars produits",
    y = "Estimation"
  ) +
  geom_abline(intercept = 0, slope=1) +
  scale_colour_discrete(name="Modèle")
```

---
layout: false

Voici les estimés de la production pour trois mois tels que présentés dans l'article de **Ruggles** et **Brodie**.

--

| Mois | Estimation statistique | Estimation par les services de renseignements | Selon les archives allemandes |
|:---:|:---:|:---:|:---:|
| Juin 1940 | 169 | 1 000 | 122 |
| Juin 1941 | 244 | 1 550 | 271 |
| Août 1942 | 327 | 1 550 | 342 |

---
class: middle, center, inverse

# Cas où le numéro de série initial est connu mais différent de 1

---

Supposons que nous avons une population d'objets numérotés de la façon suivante : $s+1$, $s+2$, $s+3$, ... , $s+N$, où $N$ est inconnu mais $s$ est **connu**.

--

Nous pouvons résoudre ce problème en utilisant les estimés précédents et en soustrayant la valeur $s$ aux numéros de série obtenus.

--

Par exemple, si nous avons une population où les numéros de séries débutent à 500 et nous obtenons l'échantillon suivant:

```{r, echo = FALSE}
ech = sample(500:1000, 5)
ech
```

Pour estimer la valeur de $N$, nous soustrayons $499$ à notre échantillon et nous utilisons notre estimé $\hat{N_4}$. Nous avons donc:

```{r}
ech-499
N4(ech-499)
```


---
layout: false
class: middle, center, inverse

# Cas où le numéro de série initial est inconnu

---

Supposons que nous avons une population d'objets numérotés de la façon suivante : $s+1$, $s+2$, $s+3$, ... , $s+N$, où $N$ est inconnu mais $s$ est **inconnu**.

--

Nous allons étudier la différence $d$ entre le plus grand $(X_{(n)})$ et le plus petit $(X_{(1)})$ des numéros de série, que nous notons $d$.

$$d=E(X_{(n)}-X_{(1)})=\dfrac{n\cdot(N+1)}{n+1}-\dfrac{1\cdot(N+1)}{n+1}=\dfrac{(n-1)(N+1)}{n+1}$$

--

En isolant $N$ dans l'équation précédente, nous avons notre cinquième estimé:

$$\hat{N_5}=\dfrac{(X_{(n)}-X_{(1)})(n+1)}{n-1}-1$$

--

Pouvez-vous estimer $N$ en utilisant l'échantillon suivant?

```{r, echo = FALSE}
ech <- sample(654 : 1056, 10)
```

```{r}
ech
```

--

En utilisant le cinquième estimé, nous obtenons $\hat{N_5}=$ `r N5(ech)`. La véritable réponse est `r 1056-654+1`.

---
layout: false

## Pour davantage d'informations

Tout débute avec un article de **Richard Ruggles et Henry Brodie** paru dans le volume 42 du *Journal of the American Statistical Association* en 1947. L'article s'intitule:

.center[**An Empirical Approach to Economic Intelligence in World War II**]

--

**_Pas le titre le plus accrocheur en ville..._**

--

Par contre, la lecture de l'article est passionnante. Les mathématiques sont pratiquement absentes de celui-ci mais les auteurs nous entraînent dans l'histoire du développement de leur technique en fonction des problèmes rencontrés et des solutions qui ont été trouvées.

--

Pour celles et ceux intéressés, vous pouvez trouver cet article aux endroits suivants:

- [doi](https://en.wikipedia.org/wiki/Digital_object_identifier): [10.1080/01621459.1947.10501915](https://doi.org/10.1080%2F01621459.1947.10501915)
- [JSTOR](https://en.wikipedia.org/wiki/JSTOR): [2280189](https://www.jstor.org/stable/2280189)

---
class: middle, center, inverse

# Questions?

.center[
![La chevauchée de la bombe](https://static.vix.com/es/sites/default/files/btg/series.batanga.com/files/7-brillantes-referencias-a-Stanley-Kubrick-en-Los-Simpson-14.gif)]

???

Slim Pickens dans le rôle du  Major "King" Kong chevauchant une bombe nucléaire.
